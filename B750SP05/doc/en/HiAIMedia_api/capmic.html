
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>CapMIC Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters-theme.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-copy/css/copy.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="readmicsound.html" />
    
    
    <link rel="prev" href="getmicproperty.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="introduction.html">
            
                <a href="introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="media-library-apis.html">
            
                <a href="media-library-apis.html">
            
                    
                    Media Library APIs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="medialibinit.html">
            
                <a href="medialibinit.html">
            
                    
                    MediaLibInit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="ischipalive.html">
            
                <a href="ischipalive.html">
            
                    
                    IsChipAlive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="querycameraids.html">
            
                <a href="querycameraids.html">
            
                    
                    QueryCameraIds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="querycamerastatus.html">
            
                <a href="querycamerastatus.html">
            
                    
                    QueryCameraStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="opencamera.html">
            
                <a href="opencamera.html">
            
                    
                    OpenCamera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="setcameraproperty.html">
            
                <a href="setcameraproperty.html">
            
                    
                    SetCameraProperty
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="getcameraproperty.html">
            
                <a href="getcameraproperty.html">
            
                    
                    GetCameraProperty
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="capcamera.html">
            
                <a href="capcamera.html">
            
                    
                    CapCamera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="readframefromcamera.html">
            
                <a href="readframefromcamera.html">
            
                    
                    ReadFrameFromCamera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="closecamera.html">
            
                <a href="closecamera.html">
            
                    
                    CloseCamera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="querymicstatus.html">
            
                <a href="querymicstatus.html">
            
                    
                    QueryMICStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="openmic.html">
            
                <a href="openmic.html">
            
                    
                    OpenMIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="setmicproperty.html">
            
                <a href="setmicproperty.html">
            
                    
                    SetMICProperty
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="getmicproperty.html">
            
                <a href="getmicproperty.html">
            
                    
                    GetMICProperty
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.15" data-path="capmic.html">
            
                <a href="capmic.html">
            
                    
                    CapMIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="readmicsound.html">
            
                <a href="readmicsound.html">
            
                    
                    ReadMicSound
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="closemic.html">
            
                <a href="closemic.html">
            
                    
                    CloseMIC
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="appendix.html">
            
                <a href="appendix.html">
            
                    
                    Appendix
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="example.html">
            
                <a href="example.html">
            
                    
                    Example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >CapMIC</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="capmic">CapMIC<a id="EN-US_TOPIC_0154783645"></a></h1>
<p>Captures audio data using a callback function. If the callback function generates a frame of audio data at the bottom layer, it will be called by the underlying thread of the media library. You are advised to copy the audio data to the specified buffer in the callback function for the subsequent processing.</p>
<h2 id="syntax">Syntax<a id="section7941647"></a></h2>
<p>int CapMIC(CAP_MIC_CALLBACK, void* param)</p>
<p>The callback function is as follows:</p>
<p>typedef int (*CAP_MIC_CALLBACK) (const void* pdata, int size, void* param)</p>
<h2 id="parameter-description">Parameter Description<a id="section4365965"></a></h2>
<p>The following table describes the parameters of the CapMIC function.</p>
<p><a id="table26546342"></a></p>
<table><thead align="left"><tr id="row54998482"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.1.4.1.1"><p id="p25692025"><a id="p25692025"></a><a id="p25692025"></a><strong>Parameter</strong></p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.1.4.1.2"><p id="p679301"><a id="p679301"></a><a id="p679301"></a><strong>Description</strong></p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.1.4.1.3"><p id="p55023454"><a id="p55023454"></a><a id="p55023454"></a><strong id="b2014815185017"><a id="b2014815185017"></a><a id="b2014815185017"></a>Value Range</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="row27714795"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.1 "><p id="p30305941"><a id="p30305941"></a><a id="p30305941"></a>CAP_CAMERA_CALLBACK</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.2 "><p id="p38862147"><a id="p38862147"></a><a id="p38862147"></a>Callback function used to receive data</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.3 "><p id="p60826206"><a id="p60826206"></a><a id="p60826206"></a>Valid address of a callback function</p>
</td>
</tr>
<tr id="row10564943"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.1 "><p id="p50454072"><a id="p50454072"></a><a id="p50454072"></a>param</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.2 "><p id="p60248001"><a id="p60248001"></a><a id="p60248001"></a>User-defined callback parameter</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.3 "><p id="p48249874"><a id="p48249874"></a><a id="p48249874"></a>After receiving the audio data, the media library returns this parameter to the user through the callback function.</p>
</td>
</tr>
</tbody>
</table>

<p>The following table describes the parameters of the callback function.</p>
<p><a id="table19254172924012"></a></p>
<table><thead align="left"><tr id="row1625517298402"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.1.4.1.1"><p id="p19255102914013"><a id="p19255102914013"></a><a id="p19255102914013"></a><strong id="b5280525175313"><a id="b5280525175313"></a><a id="b5280525175313"></a>Parameter</strong></p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.1.4.1.2"><p id="p13255102913408"><a id="p13255102913408"></a><a id="p13255102913408"></a><strong>Description</strong></p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.1.4.1.3"><p id="p5255329194016"><a id="p5255329194016"></a><a id="p5255329194016"></a><strong id="b1429511265535"><a id="b1429511265535"></a><a id="b1429511265535"></a>Value Range</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="row1525562910408"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.1 "><p id="p72553292409"><a id="p72553292409"></a><a id="p72553292409"></a>pdata</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.2 "><p id="p19255192911409"><a id="p19255192911409"></a><a id="p19255192911409"></a>Address of a frame of audio data</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.3 "><p id="p1925562924019"><a id="p1925562924019"></a><a id="p1925562924019"></a>This buffer is maintained by the media library and is read-only to users. Users themselves cannot release the memory that the address points to. Otherwise, exceptions may occur.</p>
</td>
</tr>
<tr id="row82551629194019"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.1 "><p id="p162555292406"><a id="p162555292406"></a><a id="p162555292406"></a>size</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.2 "><p id="p12255102914011"><a id="p12255102914011"></a><a id="p12255102914011"></a>Audio data size</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.3 "><p id="p14255202918401"><a id="p14255202918401"></a><a id="p14255202918401"></a>The value varies according to the audio format and sampling rate.</p>
</td>
</tr>
<tr id="row8255112912408"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.1 "><p id="p02551292407"><a id="p02551292407"></a><a id="p02551292407"></a>param</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.2 "><p id="p22565299402"><a id="p22565299402"></a><a id="p22565299402"></a>User-defined callback parameter</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.1.4.1.3 "><p id="p172562029124017"><a id="p172562029124017"></a><a id="p172562029124017"></a>After receiving the audio data, the media library returns this parameter to the user through the callback function.</p>
</td>
</tr>
</tbody>
</table>

<h2 id="return-value">Return Value<a id="section39293686"></a></h2>
<p>For details about the returned error codes, see the  <strong>Error Code</strong>  column in  <a href="#ref1382164">Error Codes</a>.</p>
<h2 id="error-codes">Error Codes<a id="ref1382164"></a></h2>
<p><a id="table8938642"></a></p>
<table><thead align="left"><tr id="row60013868"><th class="cellrowborder" valign="top" width="27%" id="mcps1.1.4.1.1"><p id="p2045694"><a id="p2045694"></a><a id="p2045694"></a><strong id="b62220130522"><a id="b62220130522"></a><a id="b62220130522"></a>True Value</strong></p>
</th>
<th class="cellrowborder" valign="top" width="30%" id="mcps1.1.4.1.2"><p id="p23288921"><a id="p23288921"></a><a id="p23288921"></a><strong id="b13893161615528"><a id="b13893161615528"></a><a id="b13893161615528"></a>Error Code</strong></p>
</th>
<th class="cellrowborder" valign="top" width="43%" id="mcps1.1.4.1.3"><p id="p7354428"><a id="p7354428"></a><a id="p7354428"></a><strong id="b272219184524"><a id="b272219184524"></a><a id="b272219184524"></a>Description</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="row58837767"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.1.4.1.1 "><p id="p1129827"><a id="p1129827"></a><a id="p1129827"></a>0</p>
</td>
<td class="cellrowborder" valign="top" width="30%" headers="mcps1.1.4.1.2 "><p id="p24407159"><a id="p24407159"></a><a id="p24407159"></a>LIBMEDIA_STATUS_FAILED</p>
</td>
<td class="cellrowborder" valign="top" width="43%" headers="mcps1.1.4.1.3 "><p id="p30822892"><a id="p30822892"></a><a id="p30822892"></a>Microphone audio data fails to be captured.</p>
</td>
</tr>
<tr id="row8970578"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.1.4.1.1 "><p id="p55528251"><a id="p55528251"></a><a id="p55528251"></a>1</p>
</td>
<td class="cellrowborder" valign="top" width="30%" headers="mcps1.1.4.1.2 "><p id="p1494488"><a id="p1494488"></a><a id="p1494488"></a>LIBMEDIA_STATUS_OK</p>
</td>
<td class="cellrowborder" valign="top" width="43%" headers="mcps1.1.4.1.3 "><p id="p53944722"><a id="p53944722"></a><a id="p53944722"></a>Microphone audio data is successfully captured.</p>
</td>
</tr>
</tbody>
</table>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="getmicproperty.html" class="navigation navigation-prev " aria-label="Previous page: GetMICProperty">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="readmicsound.html" class="navigation navigation-next " aria-label="Next page: ReadMicSound">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"CapMIC","level":"1.3.15","depth":2,"next":{"title":"ReadMicSound","level":"1.3.16","depth":2,"path":"readmicsound.md","ref":"readmicsound.md","articles":[]},"previous":{"title":"GetMICProperty","level":"1.3.14","depth":2,"path":"getmicproperty.md","ref":"getmicproperty.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"imgUrl":"","topnav":[]},"plugins":["expandable-chapters","copy"],"pluginsConfig":{"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"copy":{},"expandableChapters":{"cssFile":["expandable-chapters-theme.css"]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"website.css"}},"file":{"path":"capmic.md","mtime":"2019-04-12T02:50:15.796Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-12T02:50:18.440Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy/js/clipboard.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy/js/copy.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

